<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MITQuizmania - Admin Panel</title>
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <h1>MITQuizmania</h1>
                <p>Quiz Competition Control Panel</p>
            </div>
            <ul class="nav-links">
                <li><a href="#" class="active" data-tab="dashboard"><i>üìä</i> Dashboard</a></li>
                <li><a href="#" data-tab="teams"><i>üë•</i> Teams Management</a></li>
                <li><a href="#" data-tab="questions"><i>‚ùì</i> Question Management</a></li>
                <li><a href="#" data-tab="rounds"><i>üîÑ</i> Rounds Control</a></li>
                <li><a href="#" data-tab="scoreboard"><i>üèÜ</i> Scoreboard</a></li>
                <li><a href="#" data-tab="settings"><i>‚öôÔ∏è</i> Settings</a></li>
                <li><a href="#" id="open-display"><i>üñ•Ô∏è</i> Open Display</a></li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <h2>Admin Control Panel</h2>
                <div class="user-info">
                    <img src="https://ui-avatars.com/api/?name=Quiz+Admin&background=random" alt="Admin">
                    <span>Quiz Administrator</span>
                </div>
            </div>

            <div class="content">
                <!-- Dashboard Tab -->
                <div id="dashboard" class="tab-content active">
                    <div class="card">
                        <div class="card-header">
                            <h3>Event Overview</h3>
                        </div>
                        <div class="card-body">
                            <div class="flex justify-between">
                                <div class="text-center">
                                    <h4>Teams</h4>
                                    <p id="teams-count">0</p>
                                </div>
                                <div class="text-center">
                                    <h4>Questions</h4>
                                    <p id="questions-count">0</p>
                                </div>
                                <div class="text-center">
                                    <h4>Current Round</h4>
                                    <p id="current-round">Not Started</p>
                                </div>
                                <div class="text-center">
                                    <h4>Status</h4>
                                    <p id="event-status">Ready</p>
                                </div>
                            </div>
                            
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Quick Controls</h3>
                        </div>
                        <div class="card-body">
                            <button class="btn btn-primary" id="show-banner"><i>üñºÔ∏è</i> Show Event Banner</button>
                            <div style="margin:10px 0;display:flex;gap:8px;align-items:center;">
                                <select class="form-control" id="start-event-round" style="flex:1;max-width:250px;">
                                    <option value="general1">Semi-Final General</option>
                                    <option value="buzzer1">Semi-Final Buzzer</option>
                                    <option value="general2">Final General</option>
                                    <option value="topic">Topic Selection</option>
                                    <option value="rapid">Rapid Fire</option>
                                    <option value="jeopardy">Jeopardy</option>
                                    <option value="extra">Extra Questions</option>
                                </select>
                                <button class="btn btn-success" id="start-event"><i>üöÄ</i> Start Event</button>
                            </div>
                            <button class="btn btn-warning" id="show-scoreboard"><i>üìä</i> Show Scoreboard</button>
                            <button class="btn btn-danger" id="reset-scores"><i>üîÑ</i> Reset All Scores</button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Display Controls</h3>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">Display Mode</label>
                                <select class="form-control" id="display-mode">
                                    <option value="banner">Event Banner</option>
                                    <option value="question">Question Display</option>
                                    <option value="scoreboard">Scoreboard</option>
                                    <option value="round">Round Info</option>
                                    <option value="timer">Timer (Rapid Fire)</option>
                                </select>
                            </div>
                            <button class="btn btn-primary" id="update-display">Update Display</button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Current Question Display</h3>
                        </div>
                        <div class="card-body">
                            <div style="background:#f9f9f9;padding:14px;border-radius:6px;border-left:4px solid #00b0ff;">
                                <div style="margin-bottom:8px;"><strong>Round:</strong> <span id="live-question-round" style="color:#666;">‚Äî</span></div>
                                <div style="margin-bottom:8px;"><strong>Question ID:</strong> <span id="live-question-id" style="color:#666;">‚Äî</span></div>
                                <div style="margin-bottom:8px;"><strong>Text:</strong> <span id="live-question-text" style="color:#333;font-size:14px;line-height:1.5;display:block;margin-top:4px;"></span></div>
                                <div style="margin-bottom:8px;"><strong>Answer:</strong> <span id="live-question-answer" style="color:#d9534f;font-weight:600;display:block;margin-top:4px;"></span></div>
                                <div style="margin-top:12px;padding-top:12px;border-top:1px solid #ddd;display:grid;grid-template-columns:1fr 1fr;gap:12px;">
                                    <div><strong>Points:</strong> <span id="live-question-points" style="color:#5cb85c;font-weight:600;">‚Äî</span></div>
                                    <div><strong>Status:</strong> <span id="live-question-used" style="color:#999;">Not Used</span></div>
                                </div>
                            </div>
                            <div id="no-question-info" style="text-align:center;color:#999;padding:12px;">
                                No question currently displayed
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Round Rules Editor removed from here and placed inside Questions tab -->

                <!-- Teams Management Tab -->
                <div id="teams" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h3>Teams Management</h3>
                            <button class="btn btn-success" id="add-team"><i>‚ûï</i> Add Team</button>
                        </div>
                        <div class="card-body">
                            <table class="table" id="teams-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Team Name</th>
                                        <th>Members</th>
                                        <th>Score</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Teams will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card d-none" id="team-form-card">
                        <div class="card-header">
                            <h3 id="team-form-title">Add New Team</h3>
                        </div>
                        <div class="card-body">
                            <form id="team-form">
                                <div class="form-group">
                                    <label class="form-label">Team Name</label>
                                    <input type="text" class="form-control" id="team-name" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Team Members (comma separated)</label>
                                    <input type="text" class="form-control" id="team-members" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Initial Score</label>
                                    <input type="number" class="form-control" id="team-score" value="0">
                                </div>
                                <button type="submit" class="btn btn-primary">Save Team</button>
                                <button type="button" class="btn btn-secondary" id="cancel-team">Cancel</button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Question Management Tab -->
                <div id="questions" class="tab-content">
                    <div class="tabs">
                        <div class="tab active" data-question-round="general1">Semi-Final General</div>
                        <div class="tab" data-question-round="buzzer1">Semi-Final Buzzer</div>
                        <div class="tab" data-question-round="general2">Final General</div>
                        <div class="tab" data-question-round="topic">Topic Selection</div>
                        <div class="tab" data-question-round="rapid">Rapid Fire</div>
                        <div class="tab" data-question-round="jeopardy">Jeopardy</div>
                        <div class="tab" data-question-round="extra">Extra Questions</div>
                    </div>

                    <div class="card d-none" id="question-form-card">
                        <div class="card-header">
                            <h3 id="question-form-title">Add New Question</h3>
                        </div>
                        <div class="card-body">
                            <form id="question-form">
                                <div class="form-group">
                                    <label class="form-label">Question Text</label>
                                    <textarea class="form-control" id="question-text" rows="3" required></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Answer</label>
                                    <input type="text" class="form-control" id="question-answer" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Points</label>
                                    <input type="number" class="form-control" id="question-points" value="10" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Round</label>
                                    <select class="form-control" id="question-round" required>
                                        <option value="general1">Semi-Final General</option>
                                        <option value="buzzer1">Semi-Final Buzzer</option>
                                        <option value="general2">Final General</option>
                                        <option value="topic">Topic Selection</option>
                                        <option value="rapid">Rapid Fire</option>
                                        <option value="jeopardy">Jeopardy</option>
                                        <option value="extra">Extra Questions</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Question Type</label>
                                    <select class="form-control" id="question-type">
                                        <option value="text">Text Only</option>
                                        <option value="image">With Photo/Image</option>
                                        <option value="audio">With Audio</option>
                                        <option value="video">With Video/Animation</option>
                                    </select>
                                </div>
                                <div class="form-group" id="question-topic-group" style="margin-top:8px;">
                                    <label class="form-label">Topic (for Topic Selection round)</label>
                                    <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
                                        <select id="question-topic-select" class="form-control" style="flex:1;min-width:200px;">
                                            <option value="">(Choose existing topic)</option>
                                        </select>
                                        <input type="text" class="form-control" id="question-topic-custom" placeholder="Or enter custom topic" style="flex:1;min-width:200px;">
                                    </div>
                                    <small style="display:block;margin-top:6px;color:#666;">Choose an existing topic or enter a custom topic. Topic is used by Topic Selection round.</small>
                                </div>
                                
                                <!-- Media Upload Section -->
                                <div class="form-group d-none" id="media-upload-group">
                                    <label class="form-label">üì∏ Upload Media File</label>
                                    <div style="border: 2px dashed #ccc; padding: 15px; border-radius: 5px; margin-bottom: 10px;">
                                        <input type="file" class="form-control" id="question-media" accept="image/*,audio/*,video/*" style="margin-bottom: 10px;">
                                        <small style="color: #666;">
                                            üì∑ Images: JPG, PNG (max 5MB)<br>
                                            üéµ Audio: MP3, WAV, OGG (max 10MB)<br>
                                            üé¨ Video: MP4, WebM, GIF (max 50MB)
                                        </small>
                                    </div>
                                    <div id="media-preview" style="margin-top: 10px; padding: 10px; background: #f5f5f5; border-radius: 5px; display: none;">
                                        <small style="color: #666;">Preview:</small>
                                        <div id="preview-content" style="margin-top: 5px; max-height: 200px; overflow: auto;"></div>
                                    </div>
                                    <div id="upload-status" style="margin-top: 10px;"></div>
                                </div>

                                <!-- Jeopardy-specific options (shown when Round = Jeopardy) -->
                                <div class="form-group d-none" id="jeopardy-options" style="margin-top:12px;">
                                    <label class="form-label">Jeopardy Options</label>
                                    <div style="margin-bottom:8px;">
                                        <label><input type="checkbox" id="jeopardy-display-start"> Display at Beginning (show on board at start)</label>
                                    </div>
                                    <div style="margin-bottom:8px;">
                                        <label><input type="checkbox" id="jeopardy-show-team-choices"> Show according to participant team choices</label>
                                    </div>
                                    <div class="form-group" style="display:flex;gap:10px;align-items:center;">
                                        <div style="flex:1;">
                                            <label class="form-label">Board Row</label>
                                            <input type="number" id="jeopardy-row" class="form-control" min="1" value="1">
                                        </div>
                                        <div style="flex:1;">
                                            <label class="form-label">Board Column</label>
                                            <input type="number" id="jeopardy-column" class="form-control" min="1" value="1">
                                        </div>
                                    </div>
                                    <small style="display:block;margin-top:8px;color:#666;">These options apply only to questions saved to the <strong>Jeopardy</strong> round.</small>
                                </div>
                                
                                <button type="submit" class="btn btn-primary">Save Question</button>
                                <button type="button" class="btn btn-secondary" id="cancel-question">Cancel</button>
                            </form>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 id="questions-round-title">Semi-Final General Questions</h3>
                            <button class="btn btn-success" id="add-question"><i>‚ûï</i> Add Question</button>
                            <button class="btn btn-danger" id="reset-used-questions" style="margin-left:10px;"><i>üîÑ</i> Reset Used Questions</button>
                        </div>
                        <div class="card-body">
                            <table class="table" id="questions-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Question</th>
                                        <th>Answer</th>
                                        <th>Points</th>
                                        <th>Used</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Questions will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Round Rules Editor (placed inside Questions tab, below question form) -->
                    <div class="card mt-20" id="round-rules-editor">
                        <div class="card-header">
                            <h3>Round Rules Editor</h3>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">Select Round</label>
                                <select id="round-rules-select" class="form-control">
                                    <option value="general1">Semi-Final General</option>
                                    <option value="buzzer1">Semi-Final Buzzer</option>
                                    <option value="general2">Final General</option>
                                    <option value="topic">Topic Selection</option>
                                    <option value="rapid">Rapid Fire</option>
                                    <option value="jeopardy">Jeopardy</option>
                                    <option value="extra">Extra Questions</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Rules (HTML allowed)</label>
                                <textarea id="round-rules-text" class="form-control" rows="6" style="font-family: monospace;"></textarea>
                            </div>
                            <button class="btn btn-primary" id="save-round-rules">Save Rules</button>
                            <button class="btn btn-secondary" id="preview-round-rules" style="margin-left:8px;">Preview Rules</button>
                            <small style="display:block;margin-top:8px;color:#666;">You can enter HTML for formatting. Changes are saved to localStorage.</small>
                        </div>
                    </div>
                    
                    <!-- Topic Management: create / edit / delete topics -->
                    <div class="card mt-20" id="topic-management-card">
                        <div class="card-header">
                            <h3>Topic Management</h3>
                        </div>
                        <div class="card-body">
                            <form id="topic-form" style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
                                <input id="topic-name-input" class="form-control" placeholder="New topic name" style="flex:1;min-width:220px;" required>
                                <button type="submit" class="btn btn-success" id="add-topic-btn">Add / Save Topic</button>
                                <button type="button" class="btn btn-secondary" id="cancel-topic-edit" style="display:none;">Cancel Edit</button>
                            </form>

                            <div style="margin-top:12px;">
                                <div id="topic-list" style="display:flex;flex-direction:column;gap:8px;max-height:240px;overflow:auto;padding-right:6px;"></div>
                            </div>
                            <small style="display:block;margin-top:10px;color:#666;">Manage topics used in the Topic Selection round. Topics added here will appear in the question form's topic selector.</small>
                        </div>
                    </div>
                </div>

                <!-- Rounds Control Tab -->
                <div id="rounds" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h3>Rounds Control</h3>
                        </div>
                        <div class="card-body">
                            <div class="tabs">
                                <div class="tab active" data-round="general1">Semi-Final General</div>
                                <div class="tab" data-round="buzzer1">Semi-Final Buzzer</div>
                                <div class="tab" data-round="general2">Final General</div>
                                <div class="tab" data-round="topic">Topic Selection</div>
                                <div class="tab" data-round="rapid">Rapid Fire</div>
                                <div class="tab" data-round="jeopardy">Jeopardy</div>
                                <div class="tab" data-round="extra">Extra Questions</div>
                            </div>

                            <!-- Topic Selection Round Controls -->
                            <div id="topic-controls" class="card mt-20 d-none">
                                <div class="card-header">
                                    <h3>Topic Selection Round Controls</h3>
                                </div>
                                <div class="card-body">
                                    <div class="form-group">
                                        <label class="form-label">Select Topic</label>
                                        <select class="form-control" id="admin-topic-select">
                                            <!-- Topics will be populated by JavaScript -->
                                        </select>
                                    </div>
                                    <div class="form-group" style="margin-top:16px;">
                                        <label class="form-label">Questions for Selected Topic</label>
                                        <table class="table" id="admin-topic-questions-table">
                                            <thead>
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Question</th>
                                                    <th>Answer</th>
                                                    <th>Points</th>
                                                    <th>Used</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Questions will be populated by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="form-group" style="margin-top:18px;">
                                        <button class="btn btn-info" id="show-all-topics" style="width:100%;"><i>üåê</i> All Topics</button>
                                        <small style="display:block;margin-top:6px;color:#666;">Click to show all topics and Topic Selection round rules on the display page.</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Quick access: Open Jeopardy Board in new tab -->
                            <div style="margin:10px 0;">
                                <button class="btn btn-secondary" id="open-jeopardy-board"><i>üß©</i> Open Jeopardy Board</button>
                            </div>

                            <!-- Rapid Fire Special Controls -->
                            <div id="rapid-fire-section" class="card mt-20 d-none" style="background: linear-gradient(135deg, #ff6b6b 0%, #ff8c42 100%); border-radius: 10px;">
                                <div class="card-header">
                                    <h3 style="color: white; margin: 0;">‚ö° Rapid Fire Round Settings</h3>
                                </div>
                                <div class="card-body" style="color: white;">
                                    <!-- Rapid Fire Configuration -->
                                    <div style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
                                            <div>
                                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Total Time (seconds)</label>
                                                <input type="number" id="rapid-fire-total-time" value="90" min="30" max="300" style="width: 100%; padding: 10px; border: none; border-radius: 5px; font-size: 16px;">
                                                <!-- Topic selection round controls removed ‚Äî managed from Questions tab only -->

                                                <small style="display: block; margin-top: 5px; opacity: 0.9;">Duration for entire round (30-300s)</small>
                                            </div>
                                            <div>
                                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Number of Questions</label>
                                                <input type="number" id="rapid-fire-question-count" value="5" min="2" max="20" style="width: 100%; padding: 10px; border: none; border-radius: 5px; font-size: 16px;">
                                                <small style="display: block; margin-top: 5px; opacity: 0.9;">Questions to display (2-20)</small>
                                            </div>
                                        </div>
                                        <div style="background: rgba(255,255,255,0.1); padding: 12px; border-radius: 5px; margin-top: 15px;">
                                            <p style="margin: 5px 0;"><strong>Time per question:</strong> <span id="rapid-fire-time-calc">18</span>s</p>
                                            <small style="opacity: 0.9;">Questions will auto-advance every <span id="rapid-fire-time-calc-full">18</span> seconds</small>
                                        </div>
                                        <div style="margin-top:12px;display:flex;gap:8px;align-items:center;">
                                            <label style="min-width:140px;">Award points to</label>
                                            <select id="rf-team-select" class="form-control" style="flex:1;min-width:180px;"></select>
                                        </div>
                                    </div>

                                    <!-- Start/Stop Controls -->
                                    <div style="margin: 15px 0;">
                                        <button class="btn" id="start-rapid-fire" style="background: #fff; color: #ff6b6b; font-weight: bold; padding: 12px 24px; border: none; border-radius: 5px; cursor: pointer;">
                                            üöÄ START RAPID FIRE
                                        </button>
                                        <button class="btn" id="stop-rapid-fire" style="background: rgba(255,255,255,0.3); color: white; font-weight: bold; padding: 12px 24px; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">
                                            ‚èπÔ∏è STOP
                                        </button>
                                       
                                        <button class="btn" id="prev-rapid-fire" style="background: rgba(255,255,255,0.15); color: white; font-weight: bold; padding: 12px 18px; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">
                                            ‚èÆÔ∏è PREV
                                        </button>
                                        <button class="btn" id="next-rapid-fire" style="background: rgba(255,255,255,0.15); color: white; font-weight: bold; padding: 12px 18px; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">
                                            ‚è≠Ô∏è NEXT
                                        </button>
                                        <button class="btn btn-light" id="rf-pass" style="background: rgba(255,255,255,0.25); color: white; font-weight: bold; padding: 12px 18px; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">
                                            ‚û°Ô∏è PASS
                                        </button>
                                        <button class="btn btn-success" id="rf-correct" style="background: #28a745; color: white; font-weight: bold; padding: 12px 18px; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">
                                            ‚úÖ CORRECT (+10)
                                        </button>
                                    </div>

                                    <!-- Live Status -->
                                    <div id="rapid-fire-info" style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 5px; margin-top: 15px;">
                                        <div style="margin-bottom: 10px;"><strong>Current:</strong> <span id="rapid-fire-counter">Waiting to start...</span></div>
                                        <div style="margin-bottom: 10px;"><strong>Displayed Question:</strong> <div id="rf-current-question-text" style="margin-top:6px;color:#fff;font-weight:600;">‚Äî</div></div>
                                        <div style="margin-bottom: 10px;"><strong>Answer (real):</strong> <div id="rf-current-answer" style="margin-top:6px;color:#fff;">‚Äî</div></div>
                                        <div style="margin-bottom: 10px;"><strong>Time Remaining:</strong> <span id="rapid-fire-timer" style="font-size: 18px; font-weight: bold;">90s</span></div>
                                        <div style="margin-top: 15px; background: rgba(255,255,255,0.2); height: 8px; border-radius: 4px; overflow: hidden;">
                                            <div id="rapid-fire-progress" style="background: #fff; height: 100%; width: 0%; transition: width 0.3s ease;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="round-controls">
                                <div class="card mt-20">
                                    <div class="card-header">
                                        <h3 id="current-round-title">Semi-Final General Round</h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="form-group">
                                            <label class="form-label">Select Question</label>
                                            <select class="form-control" id="round-question">
                                                <!-- Questions will be populated by JavaScript -->
                                            </select>
                                        </div>
                                        <button class="btn btn-primary" id="show-question"><i>üëÅÔ∏è</i> Show Question</button>
                                        <button class="btn btn-success" id="mark-correct"><i>‚úÖ</i> Mark Correct</button>
                                        <button class="btn btn-danger" id="mark-incorrect"><i>‚ùå</i> Mark Incorrect</button>
                                        <button class="btn btn-secondary" id="prev-question" style="margin-left:8px;"><i>‚èÆÔ∏è</i> Prev Question</button>
                                        <button class="btn btn-warning" id="next-question" style="margin-left:8px;"><i>‚è≠Ô∏è</i> Next Question</button>
                                        <button class="btn btn-dark" id="stop-round" style="margin-left:8px;"><i>‚èπÔ∏è</i> Stop</button>
                                        <button class="btn btn-secondary" id="show-answer"><i>üîç</i> Show Answer</button>
                                    </div>
                                </div>

                                <div class="card mt-20">
                                    <div class="card-header">
                                        <h3>Team Points</h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="form-group">
                                            <label class="form-label">Select Team</label>
                                            <select class="form-control" id="points-team">
                                                <!-- Teams will be populated by JavaScript -->
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Points to Add/Subtract</label>
                                            <input type="number" class="form-control" id="points-value" value="10">
                                        </div>
                                        <button class="btn btn-success" id="add-points"><i>‚ûï</i> Add Points</button>
                                        <button class="btn btn-danger" id="subtract-points"><i>‚ûñ</i> Subtract Points</button>
                                    </div>
                                </div>

                                <!-- Current answer preview shown for the selected/current question -->
                                <div class="card mt-20">
                                    <div class="card-header">
                                        <h3>Correct Answer</h3>
                                    </div>
                                    <div class="card-body">
                                        <div id="round-current-answer" style="font-size:1.1rem;color:#333;min-height:32px;">‚Äî</div>
                                        <small style="display:block;margin-top:8px;color:#666;">This shows the correct answer for the currently selected question in the round control.</small>
                                    </div>
                                </div>
                            </div>

                                <!-- Topic Selection Controls removed from Rounds UI; topic management is in Questions tab -->

                                <!-- Jeopardy board controls removed: Jeopardy will behave like other rounds in round control -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Scoreboard Tab -->
                <div id="scoreboard" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h3>Live Scoreboard</h3>
                            <button class="btn btn-primary" id="refresh-scores"><i>üîÑ</i> Refresh</button>
                        </div>
                        <div class="card-body">
                            <table class="table" id="scoreboard-table">
                                <thead>
                                    <tr>
                                        <th>Position</th>
                                        <th>Team Name</th>
                                        <th>Score</th>
                                        <th>Change</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Scores will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div id="settings" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h3>Event Settings</h3>
                        </div>
                        <div class="card-body">
                            <form id="settings-form">
                                <div class="form-group">
                                    <label class="form-label">Event Title</label>
                                    <input type="text" class="form-control" id="event-title" value="MITQuizmania">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Event Subtitle</label>
                                    <input type="text" class="form-control" id="event-subtitle" value="Annual Quiz Competition">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Banner Image URL</label>
                                    <input type="text" class="form-control" id="banner-image" value="media/eventbanner.jpg">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Primary Color</label>
                                    <input type="color" class="form-control" id="primary-color" value="#1a237e">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Accent Color</label>
                                    <input type="color" class="form-control" id="accent-color" value="#00b0ff">
                                </div>
                                    <div style="margin-top:10px;">
                                        <h4>Local Save & Code Edit (Experimental)</h4>
                                        <p style="color:#666;font-size:0.9rem;margin-top:6px;">Save quiz data to a local file or open and edit project files directly (uses browser File System Access API when available).</p>
                                        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px;">
                                            <button class="btn btn-secondary" id="open-data-file">Open Data File</button>
                                            <button class="btn btn-primary" id="save-data-file">Save Data File</button>
                                            <button class="btn btn-success" id="export-data">Export (Download)</button>
                                            <button class="btn btn-warning" id="import-data">Import (Upload)</button>
                                            <button class="btn btn-sm btn-secondary" id="open-code-file">Edit Code File</button>
                                        </div>
                                        <div style="margin-top:8px;display:flex;gap:8px;align-items:center;">
                                            <label style="display:flex;align-items:center;gap:8px;color:#333;">
                                                <input type="checkbox" id="auto-save-toggle"> <span style="font-size:0.95rem;">Auto-save to opened file</span>
                                            </label>
                                            <small style="color:#666;">(When enabled, changes will be written to the file you opened/saved to.)</small>
                                        </div>
                                    </div>
                                <button type="submit" class="btn btn-primary">Save Settings</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="js/data.js"></script>
    <script type="module" src="js/admin.js"></script>
    <!-- Preview modal for round rules -->
    <div id="round-rules-preview-modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);z-index:10000;align-items:center;justify-content:center;">
        <div style="background:white;max-width:900px;width:90%;max-height:80vh;overflow:auto;border-radius:8px;padding:16px;position:relative;">
            <button id="close-round-rules-preview" style="position:absolute;top:8px;right:8px;border:none;background:#eee;padding:6px 10px;border-radius:4px;cursor:pointer;">Close</button>
            <h3 style="margin-top:0;">Preview Rules</h3>
            <div id="round-rules-preview-content" style="padding:8px;color:#222;"></div>
        </div>
    </div>
    <!-- Toast notification -->
    <div id="admin-toast" style="display:none;position:fixed;right:16px;bottom:24px;background:rgba(0,0,0,0.85);color:#fff;padding:10px 14px;border-radius:8px;z-index:11000;box-shadow:0 6px 18px rgba(0,0,0,0.3);font-weight:600;"></div>

    <!-- Code / File Editor Modal (experimental) -->
    <div id="file-editor-modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);z-index:12000;align-items:center;justify-content:center;">
        <div style="background:white;max-width:1000px;width:95%;max-height:85vh;overflow:auto;border-radius:8px;padding:12px;position:relative;">
            <button id="close-file-editor" style="position:absolute;top:8px;right:8px;border:none;background:#eee;padding:6px 10px;border-radius:4px;cursor:pointer;">Close</button>
            <h3 style="margin-top:0;">Edit File</h3>
            <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px;">
                <input id="file-path-display" readonly class="form-control" style="flex:1;" placeholder="No file selected">
                <button class="btn btn-secondary" id="choose-file-to-edit">Choose File</button>
                <button class="btn btn-primary" id="save-file-editor">Save File</button>
            </div>
            <textarea id="file-editor-textarea" style="width:100%;height:60vh;padding:10px;border:1px solid #ddd;border-radius:6px;font-family:monospace;font-size:13px;white-space:pre;"> </textarea>
        </div>
    </div>
</body>
</html>